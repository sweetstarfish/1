<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>{{ movie.title }} - 电影详情</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <style>
        .movie-detail-container { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 12px #e0e0e0; padding: 32px; }
        .movie-header { display: flex; gap: 32px; align-items: flex-start; }
        .movie-poster { width: 220px; border-radius: 8px; box-shadow: 0 2px 8px #f0f1f3; }
        .movie-info { flex: 1; }
        .movie-title { font-size: 2.2em; font-weight: bold; margin-bottom: 10px; }
        .movie-meta { color: #888; margin-bottom: 16px; }
        .movie-desc { margin-bottom: 18px; line-height: 1.7; }
        .movie-rating { font-size: 1.2em; color: #f39c12; margin-bottom: 10px; }
        .review-section { margin-top: 40px; }
        .review-list { margin-bottom: 32px; }
        .review-item { border-bottom: 1px solid #eee; padding: 16px 0; }
        .review-user { color: #3498db; font-weight: bold; }
        .review-date { color: #aaa; font-size: 0.95em; margin-left: 10px; }
        .review-rating { color: #f39c12; margin-right: 10px; }
        .review-text { margin-top: 6px; }
        .review-form { background: #f8f9fa; border-radius: 8px; padding: 24px; box-shadow: 0 2px 8px #f0f1f3; }
        .review-form label { font-weight: bold; }
        .review-form textarea { width: 100%; min-height: 60px; margin-top: 8px; margin-bottom: 16px; border-radius: 4px; border: 1px solid #ccc; padding: 8px; }
        .review-form select, .review-form button { margin-top: 8px; }
        .review-form button { background: #3498db; color: #fff; border: none; border-radius: 4px; padding: 8px 24px; font-size: 1.1em; cursor: pointer; }
        .review-form button:hover { background: #217dbb; }
        .login-tip { color: #e67e22; margin-top: 16px; }
    </style>
</head>
<body>
    <div class="movie-detail-container">
        <div class="movie-header">
            {% if movie.poster_url %}
                <img class="movie-poster" src="{{ movie.poster_url }}" alt="{{ movie.title }} 海报">
            {% endif %}
            <div class="movie-info">
                <div class="movie-title">{{ movie.title }}</div>
                <div class="movie-meta">
                    导演：{{ movie.director or '未知' }}<br>
                    类型：{{ movie.genre or '未知' }}<br>
                    上映年份：{{ movie.release_year or '未知' }}<br>
                    国家/地区：{{ movie.country or '未知' }}<br>
                    时长：{{ movie.duration or '未知' }} 分钟
                </div>
                <div class="movie-rating">平均评分：{{ movie.rating or '暂无' }}/5</div>
                <div class="movie-desc">{{ movie.description or '暂无简介' }}</div>
            </div>
        </div>

        <div class="review-section">
            <h2>观众评论</h2>
            <div class="review-list">
                {% if reviews %}
                    {% for review in reviews %}
                        <div class="review-item">
                            <span class="review-user">{{ review.user_id }}号会员</span>
                            <span class="review-date">{{ review.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                            <span class="review-rating">评分：{{ review.rating }}/5</span>
                            <div class="review-text">{{ review.review_text }}</div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div style="color:#aaa;">暂无评论，快来发表你的看法吧！</div>
                {% endif %}
            </div>

            {% if user %}
                <form class="review-form" method="post">
                    <label for="rating">评分：</label>
                    <select name="rating" id="rating" required>
                        <option value="">请选择</option>
                        <option value="5">5星</option>
                        <option value="4">4星</option>
                        <option value="3">3星</option>
                        <option value="2">2星</option>
                        <option value="1">1星</option>
                    </select>
                    <br>
                    <label for="review_text">评论内容：</label>
                    <textarea name="review_text" id="review_text" maxlength="500" required placeholder="说说你对这部电影的看法吧..."></textarea>
                    <br>
                    <button type="submit">提交评论</button>
                </form>
            {% else %}
                <div class="login-tip">请 <a href="/login">登录</a> 后发表评论。</div>
            {% endif %}
        </div>
    </div>
</body>
</html> 